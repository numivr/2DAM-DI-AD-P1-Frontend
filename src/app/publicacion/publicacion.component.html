<ion-content [fullscreen]="true">

  <!-- TODO: Habia un div que no se cerraba.
   <app-componente-publicacion
      [id]="publicacion.id"
      [nombre]="publicacion.perfil"
      [urlImgPerfil]="publicacion.fotoPerfil"
      [texto]="publicacion.texto"
      [urlImagen]="publicacion.fotoPublicacion"
      [likes]="publicacion.numLikes"
      [comentarios]="publicacion.numComentarios"
      [isFavorite]="publicacion.liked">
    </app-componente-publicacion>
   -->

    <!-- barra horizontal -->

  <div class="responsiveDiv">
    <div class="m-3">
      <ion-buttons class="botones">
        <ion-back-button defaultHref="/principal"></ion-back-button>
      </ion-buttons>
    </div>
    <div class="cuerpo p-3 m-2">
      <div class="profile-container p-1" [routerLink]="['/perfil', publicacion.perfil]">
        <img [src]="_imagePerfil_s" class="ima0_chica" alt="">
        <div class="my-2">
          <h5 class="labelMeiano centrarLabel">{{_nombre_s}}</h5>
        </div>
      </div>
      <div>
        <p class="labelChico m-1 p-3">{{_texto_s}}</p>
        <img [src]="_image_s" alt="" class="publication-image">
      </div>


      <div style="display: flex;">
        <ion-buttons slot="start">
          <ion-button  (click)="toggleFavorite()">
            <ion-icon  [name]="isFavorite ? 'heart' : 'heart-outline'">
            </ion-icon>
            <div>{{likes}}</div>
          </ion-button>
        </ion-buttons>

        <ion-buttons slot="end">
          <ion-button >
            <ion-icon name="chatbubble-outline"></ion-icon>
            <div>{{comentarios}}</div>
          </ion-button>
        </ion-buttons>

        <ion-buttons *ngIf="_yoMismo_b || _admin_b" (click)=this.delFun.borraPublicacion([this.publicacion.id]) [routerLink]="'/perfil/' + publicacion.perfil">
          <ion-button>
            <ion-icon name="trash-outline" class="delete-icon"></ion-icon>
          </ion-button>
        </ion-buttons>

        <!-- <ion-button class="btn_beige" *ngIf="_admin_b" (click)="delFun.borraPublicacion([this.publicacion.id])" [routerLink]="'/perfil/' + publicacion.perfil">Borrar</ion-button> -->
      </div>


    </div>

    <!-- barra horizontal  -->
    <hr class="hr" style="border-top:2px solid var(--color3);">

    <!-- ðŸ“Œ SecciÃ³n para escribir comentarios -->
    <div class="crearComentario">
      <ion-card class="custom-card">
        <ion-card-content>
          <ion-item>
            <ion-input placeholder="Escribe un comentario..." [(ngModel)]="nuevoComentario"></ion-input>
            <ion-button (click)="publicarComentario()">
              <ion-icon name="send"></ion-icon>
            </ion-button>
          </ion-item>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- ðŸ“Œ Mostrar comentarios -->
    <div *ngIf="publicacion !== undefined">
      <app-componente-publicacion *ngFor="let comentario of publicacion.comentarios"
                                  urlImgPerfil='{{comentario.fotoCreador || "assets/persona_placeholder.jpg"}}'
                                  [nombre]="comentario.usuarioCreador"
                                  [texto]="comentario.texto"
                                  [enlaceUsuario]="'/perfil/' + comentario.usuarioCreador"

                                  [yoMismo]=_yoMismo_b
                                  _admin_b="{{_admin_b}}"
                                  [datos]="[comentario.id]"
      ></app-componente-publicacion>
    </div>

  </div>
</ion-content>
